# Plan: Legal AI Hybrid Workflow v2

> **Feature**: legal-ai-hybrid-workflow
> **Created**: 2026-02-20
> **Updated**: 2026-02-20 (v2 — /chrome 통합 + 바이브코딩 스펙 반영)
> **Phase**: Plan
> **Status**: Active

---

## 1. Objective

법률 SaaS 플랫폼(엘박스, 슈퍼로이어, 빅케이스)에서의 판례 검색부터 법률문서(구제신청서, 준비서면 등) 생성까지를 Claude Code 단일 세션 내에서 반자동화한다.

### 현재 병목

```
엘박스/슈퍼로이어/빅케이스(판례 검색) → 복붙/다운로드 → Claude(분석·작성) → hwpx 출력
                                ⚡ 수작업 전환 지점
```

### 해결 방향

```
Claude Code 터미널 하나에서:
  /chrome → 엘박스 접속 → 판례 검색 → 결과 수집
  → IRAC 법률 분석
  → hwpx 스킬로 문서 생성
  → 로컬 폴더 저장
```

### 왜 가능한가

- 엘박스/슈퍼로이어/빅케이스: 공개 API 없음, 폐쇄형 SaaS
- Claude in Chrome: 사용자의 실제 Chrome 브라우저 사용 → 이미 로그인된 세션 그대로 활용
- 봇 탐지 무관 (Playwright와 달리 실제 사용자 브라우저)
- AI가 페이지를 시각적으로 이해하고 적응 (셀렉터 하드코딩 불필요)

### v1 → v2 변경 사유

v1은 "Direct API/MCP 없음 → 수동 export + PowerShell import" 전략이었으나, Claude Code `/chrome` 기능(공식 베타)이 확인됨에 따라 브라우저 자동화를 통한 직접 수집이 가능해짐.

## 2. Current Constraint

- LBOX, SuperLawyer, BigCase에 공개 API/MCP 엔드포인트 없음 (2026-02-19 조사 확인)
- Claude Code `/chrome`(베타)으로 로그인 세션 공유 기반 브라우저 자동화 가능
- Windows 환경에서 `/chrome` 연결 불안정 이슈 존재 (named pipe 충돌, native messaging host 오류)
- hwpx(한글 문서) 프로그래밍 생성은 ODF XML 기반으로 가능하나 복잡도 있음

## 3. Success Metrics

| 지표 | 목표 | 측정 방법 |
|------|------|-----------|
| 컨텍스트 전환 횟수 | 현재 대비 70% 감소 | 한 케이스 처리 시 탭/앱 전환 횟수 |
| 판례 수집 시간 | 건당 5분 이내 | `/chrome` 명령 → 데이터 확보까지 |
| 감사 추적 커버리지 | 100% | import-log.csv 기록률 |
| 문서 초안 품질 | IRAC 4요소 완비 | review-checklist.md 통과율 |
| 전체 파이프라인 절감률 | 86% 이상 | 수작업 3.5시간 → 자동화 30분 |

## 4. Scope

### In Scope

| Phase | 내용 | 산출물 |
|-------|------|--------|
| Phase 1 | Claude in Chrome 단독 테스트 | 엘박스 접근 검증 리포트 |
| Phase 2 | Claude Code + /chrome 풀 파이프라인 | 판례검색→IRAC→hwpx 자동화 |
| Phase 3 | Cowork + 로컬 폴더 허브 | 폴더 기반 자동 트리거 |
| Phase 4 | 강의 콘텐츠 패키징 | 데모 시나리오 + 수강생 배포 |
| Test | E2E 테스트 및 결과보고서 | 테스트 결과보고서 |

### Out of Scope

- LBOX/SuperLawyer 비공개 API 리버스 엔지니어링
- 대량 크롤링 (이용약관 위반 소지)
- 유료 법률 DB 구독 자동 결제
- 모바일 환경 지원

---

## 5. Implementation Phases

### Phase 1: Claude in Chrome 단독 테스트

**목표**: Claude in Chrome 사이드바에서 엘박스 판례 검색 결과를 읽고 정리할 수 있는지 검증

**사전 설정**:
```bash
# Claude in Chrome 확장 프로그램 설치 (Chrome Web Store)
# 버전 1.0.36 이상 필요
# Pro 플랜 이상 구독 필요

# 권한 설정에서 다음 사이트 허용:
# - lbox.kr (엘박스)
# - superlawyer.co.kr (슈퍼로이어)
# - bigcase.ai (빅케이스)
```

**테스트 시나리오**:
```
사용자가 엘박스에 로그인한 상태에서:

[사용자 → Claude in Chrome 사이드바]
"이 페이지의 판례 검색 결과에서
 판례번호, 선고일, 판시사항 핵심을 표로 정리해줘"

[기대 결과]
| 판례번호 | 선고일 | 핵심 판시 |
|----------|--------|-----------|
| 대법 2023다12345 | 2023.5.15 | ... |
```

**검증 포인트**:
- [ ] 엘박스 로그인 세션 유지되는지
- [ ] 검색 결과 페이지 내용을 정확히 읽는지
- [ ] 동적 로딩(무한 스크롤, 팝업) 처리 가능한지
- [ ] 판례 상세 페이지로 클릭 이동 가능한지

### Phase 2: Claude Code + /chrome 연동

**목표**: 터미널에서 한 줄 명령으로 판례 검색 → 문서 생성 풀 파이프라인 실행

**환경 설정**:
```bash
# Chrome 연동 활성화
claude --chrome                    # 시작 시 활성화
# 또는 세션 중:
/chrome                            # 연결 상태 확인/활성화
```

**핵심 워크플로우 A — 판례 검색 → 정리**:
```
엘박스(lbox.kr)에서 "부당해고 정당한 이유 택시기사" 검색해서
관련 판례 상위 5개를 다음 형식으로 정리해줘:

- 사건번호
- 법원/선고일
- 핵심 판시사항 (2-3줄)
- 근로자 승소/패소

결과를 ./리서치/택시기사_부당해고_판례.md 로 저장
```

**핵심 워크플로우 B — 판례 검색 → IRAC 분석 → hwpx 출력**:
```
1단계: 엘박스에서 "택시기사 해고 정당한 이유" 판례 3개 검색·수집
2단계: 수집된 판례를 기반으로 다음 사안 IRAC 분석:
  - 사실관계: 택시기사 A, 음주운전 적발, 즉시 해고
  - 쟁점: 해고의 정당성
3단계: 분석 결과로 부당해고 구제신청서 hwpx 작성
4단계: ./최종/구제신청서_택시기사A.hwpx 로 저장
```

**핵심 워크플로우 C — 슈퍼로이어 서면 초안 → Claude 보완**:
```
1단계: 슈퍼로이어(superlawyer.co.kr)에서
  "부당해고 구제신청서" 템플릿으로 초안 생성
2단계: 생성된 초안 내용을 읽어와서
3단계: 다음 사실관계 반영하여 보완
4단계: hwpx 형식으로 최종 출력
```

### Phase 3: Cowork + 로컬 폴더 허브

**목표**: 파일 기반 자동화 — 폴더에 리서치 파일 넣으면 자동 처리

**폴더 구조**:
```
사건_2026_택시기사해고/
├── 리서치/          ← 엘박스 다운로드 문서 (hwp/pdf)
├── 증거자료/        ← 진술서, 참고자료
├── 초안/            ← Claude 작성 중간물
└── 최종/            ← hwpx 최종 출력
```

**Cowork 연동 시나리오**:
```
[트리거] /리서치/ 폴더에 새 파일 감지

[Cowork 자동 실행]
1. 파일 읽기 (hwp/pdf → 텍스트 추출)
2. 판례번호, 쟁점, 법리 자동 정리
3. /초안/ 폴더에 분석 메모 저장

[사용자 확인 후]
4. IRAC 분석 → 문서 초안 생성
5. /최종/ 폴더에 hwpx 출력
```

### Phase 4: 강의 콘텐츠 패키징

**강의 시나리오**: "API 없이 법률 AI 플랫폼 연동하기"

**데모 1 — 실시간 판례 검색**:
```
Claude Code 터미널에서:
"엘박스에서 최근 1년 직장내 괴롭힘 판례 검색해서 정리해줘"

→ Chrome이 자동으로 열리고
→ 엘박스 검색 실행
→ 결과 수집·정리
→ 마크다운 파일 저장
```

**데모 2 — 풀 파이프라인**:
```
판례 검색 → IRAC 분석 → 구제신청서 hwpx 생성
전체 과정 3-5분 (수작업 시 2-3시간)
```

**데모 3 — 배치 처리**:
```
5개 사건에 대해 순차적으로:
판례 검색 → 분석 메모 생성 → 폴더별 정리
```

---

## 6. Architecture (v2)

```
═══════════════════════════════════════════════════════════
  PRIMARY PATH (/chrome 자동화)
═══════════════════════════════════════════════════════════

  Claude Code 세션
      │
      ├─ /chrome → 엘박스 탭 열기
      │     ├─ 검색어 입력 → 결과 목록 수집
      │     ├─ 상세 페이지 → 판례 본문 추출
      │     └─ 데이터 → Claude Code 컨텍스트로 반환
      │
      ├─ IRAC 분석 (Claude 내부 처리)
      │     ├─ Issue: 쟁점 도출
      │     ├─ Rule: 관련 법령/판례 정리
      │     ├─ Application: 사안 적용
      │     └─ Conclusion: 결론 + 구제 방안
      │
      └─ 문서 생성
            ├─ hwpx 템플릿 렌더링
            └─ cases/{CASE_ID}/06_final/ 저장

═══════════════════════════════════════════════════════════
  FALLBACK PATH (수동 하이브리드 — 기존 v1)
═══════════════════════════════════════════════════════════

  사용자: 엘박스에서 수동 다운로드
      ↓
  Import-LegalExports.ps1 → 03_platform_exports/
      ↓
  Build-AgentPacket.ps1 → agent-brief.md
      ↓
  Claude/Codex/Gemini → 초안 생성
```

## 7. 기존 자산 통합 전략

| 기존 자산 | v2에서의 역할 |
|-----------|---------------|
| `New-LegalCase.ps1` | **유지** — 케이스 폴더 초기 생성 |
| `Import-LegalExports.ps1` | **fallback** — `/chrome` 실패 시 수동 import 경로 |
| `Build-AgentPacket.ps1` | **fallback** — `/chrome` 경로에서는 Claude가 직접 컨텍스트 보유 |
| `case-meta.yaml` | **유지** — 케이스 메타데이터 기록 |
| `review-checklist.md` | **유지** — 최종 사람 검수 필수 |
| `cases/` 폴더 구조 | **유지** — 7단계 폴더 표준 그대로 사용 |

## 8. Technical Requirements

### 필수

| 도구 | 버전/요건 | 용도 |
|------|-----------|------|
| Claude Code CLI | v2.0.73+ | 메인 오케스트레이터 |
| Claude in Chrome 확장 | v1.0.36+ | 브라우저 자동화 |
| Google Chrome / Microsoft Edge | 최신 안정판 | 브라우저 |
| claude.ai 구독 | Pro 이상 ($20/월) | Chrome 연동 필수 |

### 선택

| 도구 | 용도 | Phase |
|------|------|-------|
| Cowork | 로컬 폴더 감시·자동화 | Phase 3 |
| hwpx 스킬 | 한글 문서 생성 | Phase 2+ |
| PowerShell v7+ | fallback 스크립트 | 기존 |

## 9. Risk Controls

| 리스크 | 영향 | 대응 |
|--------|------|------|
| `/chrome` 베타 불안정 (특히 Windows) | 자동화 실패 | Fallback 파이프라인 항상 유지, macOS CLI 권장 |
| 엘박스 페이지 구조 변경 | 네비게이션 실패 | 자연어 기반 지시로 셀렉터 의존 최소화 |
| 엘박스 세션 타임아웃 | 재로그인 필요 | "로그인 페이지 보이면 멈추고 알려줘" 지시 |
| 동적 로딩 실패 | 데이터 누락 | "페이지 로딩 완료까지 3초 대기 후 진행" 지시 |
| 대량 접근 시 IP 차단 | 서비스 이용 불가 | 건당 적정 간격, 일일 한도 자체 설정 |
| hwpx 포맷 호환성 | 한글에서 깨짐 | 실제 한글 프로그램으로 열어서 검증 |
| 민감 데이터 유출 | 법적 문제 | cases/ git-ignore 유지, 로컬 전용 |
| 이용약관 회색지대 | 법적 리스크 | Chrome은 "사용자 조작"이므로 크롤링과 구분, 합리적 사용 |

## 10. Milestones

| # | 마일스톤 | 산출물 | 검증 기준 |
|---|----------|--------|-----------|
| M0 | `/chrome` 연결 검증 | 연결 성공 로그 | Phase 1 체크리스트 전항목 통과 |
| M1 | 판례 검색 자동화 | 워크플로우 A 동작 | 판례 5건 정상 수집 |
| M2 | IRAC + hwpx 풀 파이프라인 | 워크플로우 B 동작 | 구제신청서 1건 정상 생성 |
| M3 | 케이스 폴더 통합 | 자동 저장 + import-log | 감사 추적 100% |
| M4 | Cowork 폴더 자동화 | 워크플로우 트리거 동작 | 5회 반복 안정성 |
| M5 | 강의 콘텐츠 패키징 | 데모 시나리오 3종 | 라이브 데모 성공 |
| M6 | **E2E 테스트 + 결과보고서** | **테스트 결과보고서** | **전체 워크플로우 통과** |

## 11. 테스트 계획

### Phase 1 검증 (30분)

- [ ] Claude in Chrome 설치 완료
- [ ] 엘박스 로그인 상태에서 사이드바 열기
- [ ] "이 페이지 내용 읽어줘" → 정상 응답 확인
- [ ] 판례 검색 결과 페이지에서 데이터 추출 가능 확인

### Phase 2 검증 (1시간)

- [ ] `claude --chrome` 정상 실행
- [ ] `/chrome` 연결 상태 확인
- [ ] 워크플로우 A: 판례 검색 → 마크다운 저장
- [ ] 워크플로우 B: 판례 → IRAC → hwpx 풀 파이프라인
- [ ] 워크플로우 C: 슈퍼로이어 초안 → Claude 보완

### Phase 3 검증 (반나절)

- [ ] Cowork 로컬 폴더 연동 설정
- [ ] 파일 드롭 → 자동 처리 트리거 확인
- [ ] 전체 워크플로우 안정성 (5회 반복)

### Phase 4 검증 (데모)

- [ ] 데모 1: 실시간 판례 검색 (3분 이내)
- [ ] 데모 2: 풀 파이프라인 (5분 이내)
- [ ] 데모 3: 배치 처리 5건

### E2E 최종 테스트 (실제 케이스)

- [ ] 실제 사건 1건에 대해 전체 파이프라인 실행
- [ ] 산출물 품질 검토 (IRAC 4요소 완비, 법률 용어 정확성)
- [ ] hwpx 파일 한글 프로그램에서 정상 열림 확인
- [ ] 테스트 결과보고서 작성 및 제출

## 12. 최종 산출물 목록

| # | 산출물 | 형식 | 저장 위치 |
|---|--------|------|-----------|
| 1 | Plan 문서 (본 문서) | .md | docs/01-plan/features/ |
| 2 | Design 문서 | .md | docs/02-design/features/ |
| 3 | IRAC 프롬프트 템플릿 | .md | scripts/ 또는 skills/ |
| 4 | hwpx 문서 템플릿 | .hwpx | templates/ |
| 5 | 워크플로우 실행 스크립트/가이드 | .md | scripts/ |
| 6 | 강의 데모 시나리오 | .md | docs/ |
| 7 | **테스트 결과보고서** | **.md** | **docs/04-report/** |

## 13. 예상 성과

| 작업 | 현재 (수작업) | 목표 (자동화) | 절감률 |
|------|--------------|--------------|--------|
| 판례 검색·정리 | 30분 | 3분 | 90% |
| IRAC 분석 | 1시간 | 10분 | 83% |
| 구제신청서 hwpx 작성 | 2시간 | 15분 | 88% |
| **전체 파이프라인** | **3.5시간** | **30분** | **86%** |

## 14. Implementation Priority

```
Step 0: /chrome 연결 테스트           ← 블로커 확인 (최우선)
Step 1: 엘박스 판례 검색 프로토타입    ← 핵심 가치 검증
Step 2: IRAC 분석 프롬프트 체계화       ← 법률 품질 확보
Step 3: hwpx 템플릿 + 렌더링           ← 최종 산출물
Step 4: 케이스 폴더 통합               ← 기존 구조 연동
Step 5: E2E 통합 테스트               ← 실무 검증
Step 6: 테스트 결과보고서 작성          ← 최종 마무리
```
